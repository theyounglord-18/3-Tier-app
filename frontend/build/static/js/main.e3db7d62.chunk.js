(this["webpackJsonpmy-mern-app"]=this["webpackJsonpmy-mern-app"]||[]).push([[0],{9:function(t,e,o){"use strict";o.r(e);var n=o(1),c=o.n(n),a=o(3),r=o.n(a),s=o(0);const i="http://localhost:5000/api/todos";var d=()=>{const[t,e]=Object(n.useState)([]),[o,c]=Object(n.useState)(""),[a,r]=Object(n.useState)(!1),[d,l]=Object(n.useState)(""),h=async()=>{r(!0),l("");try{const t=await fetch(i);if(!t.ok)throw new Error("Failed to fetch todos");const o=await t.json();e(o)}catch(t){l(t.message)}r(!1)};Object(n.useEffect)(()=>{h()},[]);return Object(s.jsxs)("div",{style:{maxWidth:400,margin:"2rem auto",padding:20,border:"1px solid #ccc",borderRadius:8},children:[Object(s.jsx)("h2",{children:"Todo App"}),Object(s.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),l(""),o.trim())try{const t=await fetch("http://localhost:5000/api/todos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:o})});if(!t.ok){const e=await t.json();throw new Error(e.error||"Failed to add todo")}c(""),h()}catch(e){l(e.message)}},style:{marginBottom:20},children:[Object(s.jsx)("input",{type:"text",value:o,onChange:t=>c(t.target.value),placeholder:"Add a new todo",style:{width:"70%",padding:8}}),Object(s.jsx)("button",{type:"submit",style:{padding:8,marginLeft:8},children:"Add"})]}),d&&Object(s.jsx)("p",{style:{color:"red"},children:d}),a?Object(s.jsx)("p",{children:"Loading..."}):Object(s.jsx)("ul",{style:{listStyle:"none",padding:0},children:t.map(t=>Object(s.jsxs)("li",{style:{marginBottom:10,display:"flex",alignItems:"center"},children:[Object(s.jsx)("span",{onClick:()=>(async t=>{l("");try{if(!(await fetch(`${i}/${t}/toggle`,{method:"PATCH"})).ok)throw new Error("Failed to toggle todo");h()}catch(e){l(e.message)}})(t._id),style:{textDecoration:t.completed?"line-through":"none",cursor:"pointer",flex:1},children:t.title}),Object(s.jsx)("button",{onClick:()=>(async t=>{l("");try{if(!(await fetch(`${i}/${t}`,{method:"DELETE"})).ok)throw new Error("Failed to delete todo");h()}catch(e){l(e.message)}})(t._id),style:{marginLeft:10},children:"Delete"})]},t._id))})]})};var l=function(){return Object(s.jsx)(d,{})};r.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(l,{})}),document.getElementById("root"))}},[[9,1,2]]]);
//# sourceMappingURL=main.e3db7d62.chunk.js.map